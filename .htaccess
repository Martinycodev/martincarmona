RewriteEngine On

# Si el archivo o directorio no existe, redirigir a index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

# Denegar acceso directo a directorios sensibles
RewriteRule ^(app|config|core|migrations|vendor)(/|$) - [F,L]

# Bloquear acceso a archivos de configuraci√≥n y entorno
<FilesMatch "^(\.env|composer\.json|composer\.lock)$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

# Bloquear acceso directo a archivos PHP salvo el punto de entrada
<FilesMatch "\.php$">
    Order Allow,Deny
    Deny from all
</FilesMatch>

<Files "index.php">
    Order Allow,Deny
    Allow from all
</Files>
